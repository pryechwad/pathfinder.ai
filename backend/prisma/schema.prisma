generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  fullName  String
  phone     String?
  city      String?
  grade     String?
  school    String?
  role      Role     @default(STUDENT)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  bookings  Booking[]
  courses   CourseEnrollment[]
  careerGoals CareerGoal[]
  activities Activity[]
  
  @@map("users")
}

model Mentor {
  id           String   @id @default(cuid())
  email        String   @unique
  password     String
  name         String
  title        String
  company      String
  expertise    String[]
  experience   String
  rating       Float    @default(0)
  reviews      Int      @default(0)
  sessions     Int      @default(0)
  price        Int
  location     String
  languages    String[]
  available    Boolean  @default(true)
  nextSlot     String?
  responseTime String?
  image        String?
  color        String   @default("blue")
  bio          String?
  achievements String[]
  specialties  String[]
  isPremium    Boolean  @default(false)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  
  bookings     Booking[]
  
  @@map("mentors")
}

model Booking {
  id        String        @id @default(cuid())
  userId    String
  mentorId  String
  date      DateTime
  time      String
  topic     String
  duration  Int           @default(60)
  status    BookingStatus @default(PENDING)
  orderId   String        @unique
  paymentId String?
  amount    Int
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt
  
  user      User          @relation(fields: [userId], references: [id], onDelete: Cascade)
  mentor    Mentor        @relation(fields: [mentorId], references: [id], onDelete: Cascade)
  
  @@map("bookings")
}

model Course {
  id          String   @id @default(cuid())
  title       String
  description String
  category    String
  duration    String
  level       String
  instructor  String
  rating      Float    @default(0)
  students    Int      @default(0)
  price       Int      @default(0)
  image       String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  enrollments CourseEnrollment[]
  
  @@map("courses")
}

model CourseEnrollment {
  id         String   @id @default(cuid())
  userId     String
  courseId   String
  progress   Int      @default(0)
  completed  Boolean  @default(false)
  enrolledAt DateTime @default(now())
  
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  course     Course   @relation(fields: [courseId], references: [id], onDelete: Cascade)
  
  @@unique([userId, courseId])
  @@map("course_enrollments")
}

model CareerGoal {
  id          String   @id @default(cuid())
  userId      String
  title       String
  description String?
  targetDate  DateTime?
  completed   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("career_goals")
}

model Activity {
  id          String   @id @default(cuid())
  userId      String
  type        String
  title       String
  description String?
  timestamp   DateTime @default(now())
  
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("activities")
}

model Hackathon {
  id          String   @id @default(cuid())
  title       String
  description String
  organizer   String
  startDate   DateTime
  endDate     DateTime
  prize       String
  difficulty  String
  participants Int     @default(0)
  tags        String[]
  image       String?
  registrationLink String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@map("hackathons")
}

model Contact {
  id        String   @id @default(cuid())
  name      String
  email     String
  subject   String
  message   String
  createdAt DateTime @default(now())
  
  @@map("contacts")
}

enum Role {
  STUDENT
  MENTOR
  ADMIN
}

enum BookingStatus {
  PENDING
  CONFIRMED
  COMPLETED
  CANCELLED
}
